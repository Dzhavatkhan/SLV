"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37822,77357],{72710:function(e,n,r){r.d(n,{E:function(){return i}});var t=r(25237),i=r.n(t)()(function(){return Promise.all([r.e(41075),r.e(97709),r.e(81939)]).then(r.bind(r,81939)).then(function(e){return e.ConfirmationDrawerContent})},{loadableGenerated:{webpack:function(){return[81939]}},ssr:!1})},54987:function(e,n,r){r.d(n,{$:function(){return l},z:function(){return u}});var t=r(70865),i=r(96670),s=r(52322),a=r(25237),o=r.n(a),u=o()(function(){return Promise.all([r.e(81503),r.e(76412),r.e(41075),r.e(24394),r.e(28903),r.e(70180),r.e(60902),r.e(71533),r.e(77118),r.e(41435),r.e(21154),r.e(87381),r.e(63244),r.e(6142),r.e(17488),r.e(38192)]).then(r.bind(r,56693)).then(function(e){return e.ImageLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[56693]}},ssr:!1}),c=o()(function(){return Promise.all([r.e(70180),r.e(60902),r.e(18729),r.e(21154),r.e(87381),r.e(75650)]).then(r.bind(r,60725)).then(function(e){return e.GenerativeImageLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[60725]}},ssr:!1}),l=function(e){var n=e.shouldRenderGenerativeLicenseDrawer,r=e.isImageLicenseSwitcher;return(0,s.jsx)(s.Fragment,{children:n?(0,s.jsx)(c,(0,t.Z)({},e)):(0,s.jsx)(u,(0,i.Z)((0,t.Z)({},e),{isImageLicenseSwitcher:r}))})}},5676:function(e,n,r){r.d(n,{E:function(){return U}});var t=r(70865),i=r(96670),s=r(26297),a=r(87394),o=r(52322),u=r(79441),c=r(72710),l=r(44699),d=r(81034),f=r(8149),m=r(94054),v=r(95927),h=r(79320),p=r(44297),w=r(95775),b=r(59004),g=r(62767),C=r(776),D=r(72075),S=r(25237),L=r.n(S),P=r(5632),y=r(2784),Z=r(80589),k=r(3255),E=L()(function(){return Promise.all([r.e(81503),r.e(76412),r.e(41075),r.e(71533),r.e(6142),r.e(92521),r.e(99476)]).then(r.bind(r,99476)).then(function(e){return e.EditorialImageLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[99476]}},ssr:!1}),I=L()(function(){return r.e(10878).then(r.bind(r,10878)).then(function(e){return e.EditorialVideoLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[10878]}},ssr:!1}),j=r(54987),x=L()(function(){return r.e(9293).then(r.bind(r,9293)).then(function(e){return e.LoggedInMusicLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[9293]}},ssr:!1}),A=L()(function(){return r.e(26278).then(r.bind(r,26278)).then(function(e){return e.LoggedInSfxLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[26278]}},ssr:!1}),T=L()(function(){return Promise.all([r.e(81503),r.e(76412),r.e(41075),r.e(71533),r.e(6142),r.e(92521),r.e(89047),r.e(21543)]).then(r.bind(r,21543)).then(function(e){return e.LoggedInVideoLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[21543]}},ssr:!1}),G=L()(function(){return Promise.all([r.e(74384),r.e(37488)]).then(r.bind(r,37488)).then(function(e){return e.ExperimentCVRT1335})},{loadableGenerated:{webpack:function(){return[37488]}},ssr:!1}),H=function(e){var n=e.asset,r=e.onDrawerClose,i=(0,h.y)().setWasLicensingEventSuccessful,s=(0,a.Z)((0,y.useState)(null),2),o=s[0],u=s[1],c=(0,p.A8)(n),l=(0,k.kY)().mutate,d=(0,y.useCallback)(function(e){var r=e.content,s=e.assetsInfo;u(r),i(!0),l((0,w.jC)({licenseeIdentifier:m.RU_,assets:[n]})),l((0,w.jC)((0,t.Z)({licenseeIdentifier:m.RU_,assets:[n]},c===f.pX&&{selectedAssetSize:s[0].selectedAssetSize},c===f.k4&&{licenseName:s[0].licenseName})))},[n,c,l,i]),v=(0,y.useCallback)(function(e){u(e.content)},[]),b=(0,y.useCallback)(function(){u(null),r()},[r]),g=(0,a.Z)((0,y.useState)({}),2),C=g[0],D=g[1],S=(0,a.Z)((0,y.useState)({status:"",error:void 0}),2);return{confirmationDrawerCloseHandler:b,licenseDrawerState:C,licenseDrawerStatus:S[0],licensedContent:o,licensingConfirmationContentDisplayHandler:d,redownloadConfirmationContentDisplayHandler:v,setLicenseDrawerState:D,setLicenseDrawerStatus:S[1],setLicensedContent:u}},U=function(e){var n,r,m,h=e.onAddToCartSuccess,w=e.onDrawerClose,S=e.isImageLicenseSwitcher,L=e.membershipProps,k=e.buttonClickHandler,U=e.licensedContentHandler,M=e.openLicenseDrawerHandler,R=(0,a.Z)((0,y.useState)(""),2),q=R[0],_=R[1],F=(0,v.i)().asset,V=(0,p.A8)(F),N=(0,g.V9)().data,$=(void 0===N?{}:N).totalNumSubscriptionsAllTime,z=(0,p.yw)({asset:F}),O=(0,P.useRouter)(),X=null==O?void 0:O.asPath;D.j&&(m=null==window?void 0:null===(n=window.location)||void 0===n?void 0:n.href);var B=(0,y.useCallback)(function(e){var n,r,t;n=m,console.error(e),null===(r=window.NREUM)||void 0===r||null===(t=r.noticeError)||void 0===t||t.call(r,e,{currentAsPath:X,msg:"(Convert team) - License Drawer - Generate - Image - Error",url:n})},[X,m]),Q=(0,u.L)({asset:F}).showLoggedInConversionPanel,W=H({asset:F,onDrawerClose:w}),Y=W.confirmationDrawerCloseHandler,J=W.licenseDrawerState,K=W.licenseDrawerStatus,ee=W.licensedContent,en=W.licensingConfirmationContentDisplayHandler,er=W.redownloadConfirmationContentDisplayHandler,et=W.setLicenseDrawerState,ei=W.setLicenseDrawerStatus,es=(0,y.useMemo)(function(){return(0,i.Z)((0,t.Z)({},J),{actionText:"licensing drawer displayed ".concat(K.status," state to the user"),alertSeverity:K.status,component:"LicenseDrawerContentSwitcher.jsx",assetType:"".concat((null==F?void 0:F.imageType)||""," ").concat(V),licenseType:q||""})},[J,K,F,V,q]);(0,b.L)({customAttributes:es,error:K.error,level:[l.cM,l.pn].includes(K.status)?"error":"",msg:null===(r=K.error)||void 0===r?void 0:r.message});var ea={onAddToCartSuccess:h,onDrawerClose:w,licenseDrawerStatus:K,setLicenseDrawerStatus:ei,setLicenseDrawerState:et,setLicenseType:_,onLicensingSuccess:en,onRedownloadSuccess:er};ea.onAddToCartSuccess;var eo=(0,s.Z)(ea,["onAddToCartSuccess"]);if((0,y.useEffect)(function(){ee&&S&&(k(),ee&&(M(),U(ee)))},[ee]),ee)return(0,o.jsxs)(o.Fragment,{children:[S&&(0,o.jsx)(j.z,(0,i.Z)((0,t.Z)({},eo),{isImageLicenseSwitcher:S})),!S&&(0,o.jsx)(c.E,{licensedContent:ee,onDrawerClose:Y})]});switch(V){case f.nj:return(0,o.jsx)(C.Mp,{value:d.hPQ,children:(0,o.jsx)(I,(0,t.Z)({},eo))});case f.k4:var eu=(0,t.Z)({shouldRenderGenerativeLicenseDrawer:z&&(0===$||void 0===$),isImageLicenseSwitcher:S,membershipProps:L},eo),ec=Q?G:j.$;return(0,o.jsx)(Z.ErrorBoundary,{onError:B,fallback:(0,o.jsx)("p",{children:"An error occurred"}),children:(0,o.jsx)(ec,(0,t.Z)({},eu))});case f.pX:return(0,o.jsx)(T,(0,t.Z)({},ea));case f.tn:return(0,o.jsx)(A,(0,t.Z)({},ea));case f.xF:return(0,o.jsx)(x,(0,t.Z)({},ea));case f.VT:return(0,o.jsx)(E,(0,t.Z)({},eo));default:return null}};U.defaultProps={isImageLicenseSwitcher:!1,membershipProps:{},buttonClickHandler:function(){},licensedContentHandler:function(){},openLicenseDrawerHandler:function(){}}},33839:function(e,n,r){r.d(n,{u:function(){return Z}});var t=r(27739),i=r(60591),s=r(65532),a=r(87414),o=r(44297),u=r(77357),c=r(70008),l=r(2784),d=r(98788),f=r(70865),m=r(96670),v=r(87394),h=r(92228),p=r(45680),w=r(3571),b=r(6647),g=r(3255);function C(){var e=(0,h.Z)(["\n    query getPromotionsEligibility($data: ProductInput) {\n      getPromotionsEligibility(data: $data) {\n        data {\n          id\n          type\n          attributes {\n            discountPercentage\n          }\n        }\n        included {\n          attributes {\n            license\n            name\n            pricing {\n              discountedAmounts {\n                USD\n                CAD\n              }\n              prices {\n                USD\n                CAD\n              }\n            }\n          }\n          id\n          type\n        }\n      }\n    }\n  "]);return C=function(){return e},e}var D=function(e){var n=(null==e?void 0:e.getPromotionsEligibility)||{};try{var r=(0,v.Z)(n.data,1)[0].attributes.discountPercentage,t=(0,v.Z)(n.included,1)[0].attributes.pricing,i=t.discountedAmounts,s=t.prices,a=i.USD,o=s.USD;return{percentage:r,price:a,originalPrice:o}}catch(e){return{}}},S=function(e){var n=e.membershipProducts;return{variables:{data:{productIds:null==n?void 0:n.map(function(e){return e.id}),currency:"USD"}},query:(0,b.gql)(C())}},L=function(e){var n,r=e.membershipProducts,t=void 0===r?[]:r,i=e.shouldFetch,s=(0,w.H)("/"),a=S({membershipProducts:t}),o=a.query,u=a.variables,c=(null==t?void 0:t.length)>0&&void 0!==i&&i,l=(0,g.ZP)(c&&[o,u],(n=(0,d.Z)(function(e){var n;return(0,p.__generator)(this,function(r){switch(r.label){case 0:return[4,s((n=(0,v.Z)(e,2))[0],n[1])];case 1:return[2,r.sent()]}})}),function(e){return n.apply(this,arguments)})),h=l.data,b=l.isLoading;return(0,m.Z)((0,f.Z)({},D(h)),{isLoading:b})},P=r(62767),y=function(){var e=(0,P.V9)().data;return{isMember:null==e?void 0:e.activeSubscriptions.some(function(e){var n;return(null==e?void 0:null===(n=e.product)||void 0===n?void 0:n.name)===t.E3O})}},Z=function(e){var n=e.asset,r=e.products,d=void 0===r?[]:r,f=e.discount,m=y().isMember,v=void 0!==m&&m,h=(0,c.B)().isIndiaRegion,p=(0,s.PE)(),w=p.currencyData,b=(void 0===w?{}:w).currency,g=p.region,C=!h&&["US","CA"].includes(g),D=(0,o.RT)({asset:n}),S=v&&C&&"USD"===(void 0===b?"USD":b),P=(0,a.$A)(d,t.E3O),Z=null==d?void 0:d.find(function(e){return e.name===t.gIk&&"single-asset-license"===e.archetype}),k=(0,l.useMemo)(function(){return P&&Z?[P,Z]:void 0},[P,Z]),E=(0,u.L)({queryParams:i.sQ,shouldFetch:v&&!k}),I=L({membershipProducts:E||k,shouldFetch:v&&!f});return(0,l.useMemo)(function(){return S?{isMembershipValuePlan:v,membershipProducts:E||k,discount:(null==I?void 0:I.price)?I:f||{},isContentTier100Asset:D}:{}},[S,v,E,k,I,f,D])}},77357:function(e,n,r){r.d(n,{L:function(){return d}});var t=r(70865),i=r(96670),s=r(81740),a=r(65532),o=r(49670),u=r(9009),c=r(3255),l=function(e){var n=e.queryParams;return(0,s.Xp)({queryParams:n}).formattedUrl},d=function(e){var n=e.queryParams,r=e.products,s=void 0===r?[]:r,d=e.shouldFetch,f=(0,a.PE)().region,m=(null==s?void 0:s.length)||!(void 0===d||d)?null:l({queryParams:(0,i.Z)((0,t.Z)({},n),{country:f})}),v=(0,c.ZP)(m,function(e){return o.uS.get(e).then(function(e){return(0,u.O)(e.data)})}).data;return(null==s?void 0:s.length)?s:v}}}]);
//# sourceMappingURL=37822.94a468f6adfdf9ac.js.map